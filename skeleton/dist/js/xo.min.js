var xo={config:{loadPathDefault:"../dist/js/",loadPathExtension:".js",ajaxPathDefault:"../dist/json/",ajaxFileExtension:".json",ajaxDefaultMethod:"get",ajaxDefaultDataType:"json",sessionStorageKey:"xo-",showErrorLog:!0,showErrorLogDate:!1,animationSpeed:500,domParentNode:"body",defaultXOWrapper:"section",initGutter:!0,initVideo:!0,initPanel:!0,initModal:!0,initForms:!0,appRunning:!1,reInitKey:"0188846aREvvS7"},_define:{backlog:function(){},domload:function(){},dataready:function(){},domready:function(){},targetclick:function(){},targetswipe:function(){}},_throw:{dataerror:function(){},datatimeout:function(){},nullified:function(){},overflow:function(){}},countDomTags:function(o){o=o||document;var e,t={},n=[],a=o.getElementsByTagName("*");for(a=n.slice.apply(a,[0,a.length]);a.length;)e=a.shift().tagName.toLowerCase(),t[e]||(t[e]=0),t[e]+=1;for(var i in t)n[n.length]=i+": "+t[i];return n.sort(function(o,e){return o=1*o.split(":")[1],e=1*e.split(":")[1],e-o}),n.join(", ")},createUniqueCode:function(){var o=(new Date).valueOf(),e=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return o+e},init:function(o,e){xo.config.appRunning!==!0?(xo.pageSetUp("html","xo","true","xo set"),1==xo.config.initGutter?xo.gutter("init"):null,1==xo.config.initVideo?xo.video():null,1==xo.config.initPanel?xo.panel():null,1==xo.config.initModal?xo.modal("init"):null,1==xo.config.initForms?xo.formToPage():null,xo.initMouseEvents(),xo.config.appRunning=!0,1==o?xo.log("xo is running"):null,e&&"function"==typeof e&&e()):xo.log("An XO instance is already running")},pageSetUp:function(o,e,t,n){xo.config.appRunning!==!0?($(o).attr({"xo-prefix":e,"xo-min":t}).addClass(n),$(xo.config.domParentNode).contents().wrapAll("<"+xo.config.defaultXOWrapper+' class="xo" xo-reserved="true">')):xo.log("An XO instance is already running")},loadSuccess:function(){$(xo.config.domParentNode).css("opacity",1)},loadExternal:function(scriptPath,scriptURI,scriptExt){var a=xo.config.loadPathDefault,b=void 0==scriptURI?"":scriptURI,c=xo.config.loadPathExtension,d=a+b+c;$.getScript(d,function(xoCore){eval(xoCore)})},log:function(o){var e=navigator.vendor.indexOf("Google")>-1,t=1==xo.config.showErrorLogDate?new Date:"";1==xo.config.showErrorLog&&(1==e?console.warn(o,t):console.log(o,t))},switchNavMode:function(){{var o=($("html").attr("xo-prefix"),$(xo.config.domParentNode).find(xo.config.defaultXOWrapper)),e=o.attr("xo-reserved");1==e?xo.config.ajaxPathDefault:scriptPath}},animate:function(){},getData:function(o,e,t,n,a){var i=xo.config.ajaxPathDefault,l=void 0==e?"":e,r=xo.config.ajaxFileExtension,s=i+l+r;return $.ajax({dataType:xo.config.ajaxDefaultDataType,url:s,type:xo.config.ajaxDefaultMethod,statusCode:{404:function(){xo.log("XO can't load that file")},500:function(){xo.log("the server has encountered an internal error")},502:function(){xo.log("bad gateway")},503:function(){xo.log("the service is unavailable")},504:function(){xo.log("the gateway has timed out")}}}).success(function(o){"p"==t?xo.parseData(o,!0,a):"s"==t?xo.saveDataToSession(JSON.stringify(o),"s",xo.config.sessionStorageKey,n):"b"==t&&(null===sessionStorage.getItem(xo.config.sessionStorageKey+n)&&(xo.saveDataToSession(JSON.stringify(o),"s",xo.config.sessionStorageKey,n),xo.log("Saved "+xo.config.sessionStorageKey+n+" to session storage")),xo.getDataFromSession("xo",n,!0))}).error(function(){xo.log("ajax can't load that file")})},parseData:function(o,e,t){if(1==e)var n=JSON.parse(o);$(t).append(n)},saveDataToSession:function(o,e,t,n){"undefined"!=typeof Storage?"s"==e?sessionStorage.setItem(t+n,o):localStorage.setItem(xo.config.sessionStorageKey+xo.createUniqueCode(),o):xo.log("Sorry! No Web Storage support..")},getDataFromSession:function(o,e,t){var n=sessionStorage.getItem(o+"-"+e);return 1==t&&(n=JSON.parse(n)),n},trigger:function(o,e,t){t=t||null,"direct"==o?window.location=e:"prompt"==o&&xo.prompt(t,e)},prompt:function(o,e){var t=confirm(o);1==t&&(window.location=e),document.getElementById("demo").innerHTML=txt},tooltip:function(o,e){if("add"==e){var t=$(o).attr("xo-tooltip-text"),n="tooltip"==$(o).attr("xo-trigger"),a=$(o).offset().top,i=$(o).offset().left;if(1==n){var l='<div class="tooltip" style="left:'+i+";top:"+a+';">'+t+"</div>";$(l).insertAfter(o)}}else"delete"==e&&$(".tooltip").remove()},panel:function(){$('[xo-type="panel-group"]').each(function(){var o='[xo-type="panel"]',e=$(this).children().length,t=$(this).width();$(this).find(o).each(function(){$(this).css("width",t/e-e),console.log(e)})})},getTemplateObjects:function(o,e){var t=e.split(",");switch(o){case"modal":var n=t[0],a=t[1],i=t[2];if(i.indexOf("/")>-1)var l=i.split("/"),r=l[0],s=l[1];var c='<div class="xo modal title">'+n+"</div>";return c+='<div class="xo modal body">'+a+"</div>",c+='<div class="xo modal buttons">',Array.isArray(l)?(c+="<button>"+r+"</button>",c+="<button>"+s+"</button>"):c+="<button>"+i+"</button>",c+="</div>";case"popup":}},modal:function(o,e){var t='[xo-type="modal"]',n='[xo-type="modal-filter"]',a='<div xo-type="modal-filter"></div>',i=$(t).attr("xo-data-template");if("undefined"!=typeof i&&i!==!1?($(t).contents().not('[xo-type="modal-toggle"]').remove(),$(t).append(xo.getTemplateObjects("modal",i))):"undefined"!==e&&e!==!1&&($(t).contents().not('[xo-type="modal-toggle"]').remove(),$(t).append(xo.getTemplateObjects("modal",e))),$(t).length>0)var l=$(t).attr("xo-state");"init"==o?($(t).prepend('<div xo-type="modal-toggle">X</div>'),$(t).wrap('<div class="modal-wrapper" xo-state="closed">')):"open"==l?($(t).attr("xo-state","closed"),$(t).parent().attr("xo-state","closed"),$(n).animate({opacity:0},xo.config.animationSpeed,function(){$(n).remove()})):"closed"==l&&($(xo.config.defaultXOWrapper+".xo").prepend(a),$(n).animate({opacity:1},xo.config.animationSpeed,function(){$(t).attr("xo-state","open"),$(t).parent().attr("xo-state","open")}))},gutter:function(o){var e='[xo-type="gutter"]',t='[xo-type="gutter-filter"]',n='<div xo-type="gutter-filter"></div>';if($(e).length>0){var a=$(e).attr("xo-state"),i=$(e).width();$(e).attr("xo-type-param")}"init"==o?($(e).prepend('<div xo-type="gutter-toggle">X</div>'),"closed"==a&&$(e).css("left",-i)):"open"==a?($(e).animate({left:-i},xo.config.animationSpeed).attr("xo-state","closed"),$(t).animate({opacity:0},xo.config.animationSpeed,function(){$(t).remove()})):"closed"==a&&($(e).animate({left:0},xo.config.animationSpeed).attr("xo-state","open"),$(xo.config.defaultXOWrapper+".xo").prepend(n),$(t).animate({opacity:1},xo.config.animationSpeed))},navbar:function(){},video:function(){$('[xo-type="video"]').each(function(){var o='[xo-type="video"]',e=$(o).attr("xo-video-width")||"auto",t=$(o).attr("xo-video-height")||"auto",n=$(o).attr("xo-video-src"),a=$(o).attr("xo-video-format"),i=$(o).attr("xo-video-controls"),l=$(o).attr("xo-video-autoplay"),r='<video width="'+e+'" height="'+t+'"';"true"==i&&(r+=" controls"),"true"==l&&(r+=" autoplay"),r+=">",r+='<source src="'+n+'" type="video/'+a+'">',r+="Your browser does not support the video tag.",r+="</video>",$(o).contents().remove(),$(o).append(r)})},formToPage:function(){$('[xo-type="form"]').each(function(){var o=$(this).attr("xo-object-name");xo.formBuilder("forms/"+o,o,o)})},formBuilder:function(o,e,t){var n=xo.getData(null,o,"b",e),a=[],i="[",l="[",r="[",s="[";n.success(function(o){var e=[],n=o.form;e.push({action:o.formAction,method:o.formMethod,id:o.formId,"class":o.formClass}),Object.keys(n).forEach(function(o){switch(n[o].item){case"select":if("object"==typeof n[o].option){for(var e=n[o].option.length,t=0;e>t;t++)i+='{"optionName":"'+n[o].option[t].name+'","optionValue":"'+n[o].option[t].value+'"',i+=1==n[o].option[t].selected?',"optionSelected":true':"",i+="}",e-1>t&&(i+=",");i+="]",i=JSON.parse(i)}break;case"radiogroup":if("object"==typeof n[o].option){for(e=n[o].option.length,t=0;e>t;t++)l+='{"optionName":"'+n[o].option[t].name+'","optionValue":"'+n[o].option[t].value+'"',l+=1==n[o].option[t].checked?',"optionChecked":true':"",l+="}",e-1>t&&(l+=",");l+="]",l=JSON.parse(l)}break;case"checkbox":if("object"==typeof n[o].option){for(e=n[o].option.length,t=0;e>t;t++)r+='{"optionName":"'+n[o].option[t].name+'","optionValue":"'+n[o].option[t].value+'"',r+=1==n[o].option[t].checked?',"optionChecked":true':"",r+="}",e-1>t&&(r+=",");r+="]",r=JSON.parse(r)}break;case"datalist":if("object"==typeof n[o].option){for(e=n[o].option.length,t=0;e>t;t++)s+='{"optionValue":"'+n[o].option[t].value+'"}',e-1>t&&(s+=",");s+="]",s=JSON.parse(s)}}a.push({item:n[o].item,name:n[o].name,label:n[o].label||null,"class":n[o].class||null,id:n[o].id||null,required:n[o].required||null,multiple:n[o].multiple||null,placeholder:n[o].placeholder||null,value:n[o].value||null,min:n[o].min-length||null,max:n[o].max-length||null,rows:n[o].rows||null,cols:n[o].cols||null,submit:n[o].submit||null,options:i||l||r||s})});for(var c=a.length,u=0;c>u;u++)switch(a[u].item){case"text":var d='<div class="form-line '+a[u].item+'">';d+=null!==a[u].label?'<label for="'+a[u].name+'">'+a[u].label+"</label>":"",d+='<input type="text"',d+=null!==a[u].name?' name="'+a[u].name+'"':"",d+=null!==a[u].class?' class="'+a[u].class+'"':"",d+=null!==a[u].id?' id="'+a[u].id+'"':"",d+=null!==a[u].required&&1==a[u].required?" required":"",d+=null!==a[u].placeholder?' placeholder="'+a[u].placeholder+'"':"",d+=null!==a[u].value?' value="'+a[u].value+'"':"",d+=null!==a[u].min?' minlength="'+a[u].min+'"':"",d+=null!==a[u].max?' maxlength="'+a[u].max+'"':"",d+="></div>";break;case"textarea":d+='<div class="form-line '+a[u].item+'">',d+=null!==a[u].label?'<label for="'+a[u].name+'">'+a[u].label+"</label>":"",d+="<textarea",d+=null!==a[u].rows?' rows="'+a[u].rows+'"':"",d+=null!==a[u].cols?' cols="'+a[u].cols+'"':"",d+=null!==a[u].name?' name="'+a[u].name+'"':"",d+=null!==a[u].class?' class="'+a[u].class+'"':"",d+=null!==a[u].id?' id="'+a[u].id+'"':"",d+=null!==a[u].required&&1==a[u].required?" required":"",d+=null!==a[u].placeholder?' placeholder="'+a[u].placeholder+'"':"",d+=null!==a[u].max?' maxlength="'+a[u].max+'"':"",d+="></textarea></div>";break;case"select":d+='<div class="form-line '+a[u].item+'">',d+=null!==a[u].label?'<label for="'+a[u].name+'">'+a[u].label+"</label>":"",d+="<select",d+=null!==a[u].name?' name="'+a[u].name+'"':"",d+=null!==a[u].required&&1==a[u].required?" required":"",d+=null!==a[u].multiple&&1==a[u].multiple?" multiple":"",d+=null!==a[u].class?' class="'+a[u].class+'"':"",d+=null!==a[u].id?' id="'+a[u].id+'"':"",d+=">";for(var p=0,f=a[u].options.length;f>p;p++)d+="<option",d+=null!==a[u].options[p].optionSelected&&1==a[u].options[p].optionSelected?" selected":"",d+=' value="'+a[u].options[p].optionValue+'">',d+=a[u].options[p].optionName+"</option>";d+="</select></div>";break;case"radiogroup":d+='<div class="form-line '+a[u].item+'">',d+=null!==a[u].label?'<label for="'+a[u].name+'">'+a[u].label+"</label>":"";for(var x=0,g=a[u].options.length;g>x;x++)d+='<input type="radio"',d+=' name="'+a[u].name+'"',d+=null!==a[u].options[x].optionChecked&&1==a[u].options[x].optionChecked?" checked":"",d+=' value="'+a[u].options[x].optionValue+'">';d+="</div>";break;case"checkbox":d+='<div class="form-line '+a[u].item+'">',d+=null!==a[u].label?'<label for="'+a[u].name+'">'+a[u].label+"</label>":"";for(var m=0,v=a[u].options.length;v>m;m++)d+='<input type="checkbox"',d+=' name="'+a[u].name+'"',d+=null!==a[u].options[m].optionChecked&&1==a[u].options[m].optionChecked?" checked":"",d+=' value="'+a[u].options[m].optionValue+'">';d+="</div>";break;case"datalist":d+='<div class="form-line '+a[u].item+'">',d+=null!==a[u].label?'<label for="'+a[u].name+'">'+a[u].label+"</label>":"",d+='<input list="'+a[u].id+'" name="'+a[u].name+'">',d+='<datalist id="'+a[u].id+'">';for(var h=0,b=a[u].options.length;b>h;h++)d+='<option value="'+a[u].options[h].optionValue+'">';d+="</datalist>",d+=a[u].submit!==!0?"":'<input type="submit">',d+="</div>"}var y='<form action="'+e[0].action+'" method="'+e[0].method+'" id="'+e[0].id+'" class="'+e[0].class+'">',S="</form>";$('[xo-object-name="'+t+'"]').append(y+d+S)})},initMouseEvents:function(){var o,e;$("body").on("mouseover",'[xo-trigger="tooltip"]',function(t){o=t.pageX,e=t.pageY,xo.tooltip($(this),"add")}).on("mouseout",'[xo-trigger="tooltip"]',function(){xo.tooltip(null,"delete")}).on("click",'[xo-trigger="url"]',function(){var o=$(this).attr("xo-trigger-url");xo.trigger("direct",o,null)}).on("click",'[xo-type="gutter-toggle"]',function(){xo.gutter(null)}).on("click",'[xo-trigger="gutter-toggle"]',function(){xo.gutter(null)}).on("click",'[xo-type="gutter-filter"]',function(){xo.gutter(null)}).on("click",'[xo-type="modal-toggle"]',function(){""!==$(this).attr("xo-data-template")&&xo.modal(null,$(this).attr("xo-data-template"))}).on("click",'[xo-type="modal-filter"]',function(){xo.modal()})}};